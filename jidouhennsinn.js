javascript:(()=>{const BASE_PATH=location.pathname.replace(/\/+$/,"");const ROOM_ID=BASE_PATH.split("/").pop();const POST_URL=location.origin+BASE_PATH+"/post_feed.php";const SEND_NAME="Σsuicided_m!kan!";const CHECK_WORD="@みかん";window.SEND_COMMENT=prompt("送信する発言内容を入力");if(!window.SEND_COMMENT)return;let lastFeedId=0;document.querySelectorAll(".feed_id").forEach(e=>{const n=parseInt(e.textContent,10);if(!isNaN(n)&&n>lastFeedId)lastFeedId=n});function send(){const body=new URLSearchParams({room_id:ROOM_ID,name:SEND_NAME,comment:window.SEND_COMMENT,is_special:0});fetch(POST_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body})}const btn=document.createElement("button");btn.textContent="自動返信発言内容変更";btn.style.cssText="position:fixed;top:8px;left:8px;z-index:99999;padding:6px 10px;";btn.onclick=()=>{const v=prompt("新しい発言内容",window.SEND_COMMENT||"");if(v!==null&&v!=="")window.SEND_COMMENT=v};document.body.appendChild(btn);setInterval(()=>{document.querySelectorAll("#feed_list .comment").forEach(c=>{const idEl=c.parentElement.querySelector(".feed_id");if(!idEl)return;const id=parseInt(idEl.textContent,10);if(isNaN(id)||id<=lastFeedId)return;const text=c.innerText||"";if(!text.includes(CHECK_WORD))return;lastFeedId=id;send()})},10);alert("自動送信開始 \nROOM_ID="+ROOM_ID)})();
